

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

     <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,300,700,800,900">

    <title>ANOTADOR TRUCO V1.0</title>

        <style>
        body {
            font-family: Montserrat, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        background: url(https://elchasquicultural.com/wp-content/uploads/2021/09/el-truco-florencio-molina-ocampo-1024x813-1.jpg);
    background-size: cover;
    background-position: center;
}

        
        .board {
   width: 300px;
    padding: 20px;
    border: 1px solid #020202;
    background-color: #000000ba;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    border-radius: 8px;
    text-align: center;
    
    background-size: cover;
    border-radius: 20px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
}
        h1 {
                font-size: 1em;
    margin-bottom: 0px;
    color: #fff;
    background: transparent;
    padding: 10px;
    border-radius: 8px;
        }


        .botones{
    padding: 15px;
}
.team {
    width: 44%;
    display: inline-block;
    position: relative;
    margin: 2%;
    padding: 15px 0;
    background-color: transparent;
    /*backdrop-filter: grayscale(1);*/
    
    
}
     
            .team h2 {
        margin: 0 0 10px 0px;
    color: #ffffff;
    font-weight: lighter;
    font-size: 18px;


        }
        .score {
    border: 1px solid #fff;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin: 10px auto;
    width: 90%;
    height: 280px;
    align-content: center;
    flex-direction: column;
    position: relative;
    align-items: center;
    /*background: rebeccapurple;*/
    justify-content: flex-start;
    border-radius: 8px;
    padding: 10px 5px;

        }
        
        .divider {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #fff;
            display: none;
        }
        .set {
            position: relative;
            width: 30px;
            height: 30px;
            margin: 4.1px 0;
        }
        .stick {
    position: absolute;
    width: 2px;
    height: 30px;
    background-color: #ffc107;
}
        .stick1 { left: 0px; }
        .stick2 { left: 30px; }
        .stick3 {
    left: 15px;
    top: -15px;
    transform: rotate(90deg);
}
        .stick4 {
    left: 15px;
    top: 15px;
    transform: rotate(90deg);
}
      .stick5 {
    width: 40px;
    height: 2px;
    top: 15px;
    left: -3px;
    transform: rotate(45deg);
}



        .buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .buttons button {
    padding: 0;
    height: 40px;
    width: 40px;
    font-size: 20px;
    cursor: pointer;
    /* border: none; */
    border-radius: 100%;
    line-height: normal;
}
        .add {
    background-color: transparent;
    color: white;
    border: 1px solid #fff;
}
        .subtract {
          background-color: transparent;
    color: white;
    border: 1px solid #fff;
        }
        #winnerMessage {
        display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
                background-color: #72cd0a;
    color: #021805;
            font-size: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }


        .players{
            position: relative;
                padding-top: 25px;

        }

        .players ul{
            margin: 0;
    padding: 0;

        }

        .players li{
                display: inline-block;
    width: 23%;
    position: relative;
            
        }

        .players img{
            width: 50px;
            height: 50px;
            border-radius:100%;
            border:solid 1px #fff;
            object-fit: cover;
        }

        .players h4{
            color: #fff;
            margin: 5px;
        }


        .comentarioA{
            display: none;
    background: #fff;
    font-size: 11px;
    width: 73px;
    padding: 8px 8px;
    border-radius: 30px;
    position: absolute;
    top: -10px;
    left: 28px;
        z-index: 1;
        }

        .comentarioA:after{
            content: '';
    width: 0;
    height: 0;
    border-left: 1px solid transparent;
    border-right: 15px solid transparent;
    border-top: 20px solid #ffffff;
    top: 34px;
    left: 9px;
    position: absolute;
        }


            .comentarioB{
                display: none;
    background: #fff;
    font-size: 11px;
    width: 73px;
    padding: 8px 8px;
    border-radius: 30px;
    position: absolute;
    top: -10px;
    right: 28px;
        z-index: 1;
        }


           .comentarioB:after{
            content: '';
    width: 0;
    height: 0;
    border-left: 1px solid transparent;
    border-right: 15px solid transparent;
    border-top: 20px solid #ffffff;
    top: 34px;
    left: 9px;
    position: absolute;
        }


       /* #alertBox2 {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: #f44336;
            color: white;
            font-size: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }*/


   #alertBox{
    display: none;
    background: #FFEB3B;
    font-size: 11px;
    width: 73px;
    padding: 8px 8px;
    border-radius: 30px;
    position: absolute;
    top: -38px;
    left: 28px;
        z-index: 2;
        }


   #alertBox:after{
    content: '';
    width: 0;
    height: 0;
    border-left: 1px solid transparent;
    border-right: 15px solid transparent;
    border-top: 20px solid #FFEB3B;
    top: 34px;
    left: 9px;
    position: absolute;
        }



       .inputplayer {
        position: absolute;
    width: 70%;
    top: 20%;
    left: 10%;
    background: #fff;
    height: 36%;
    text-align: center;
    padding: 5%;
    border-radius: 15px;
z-index: 9}


    .inputplayer input{padding: 10px 6px;
    width: 44%;
    display: inline-block;
    margin: 10px auto;
    border-radius: 10px;
    border: none;
    background: #00000063;}


    .inputplayer button{background: transparent;
    padding: 10px;
    border-radius: 10px;
    border: 1px solid #000;
}

    </style>

</head>
<body>


    <div class="inputplayer" id="inputplayer">

        <h3 style="    margin: 10px;font-size: 16px;">INGRESE JUGADORES</h3>
        
            <form>
        <div>
            <input type="text" id="player1Input" placeholder="Jugador 1">
            <input type="file" id="player1Image" accept="image/*">
        </div>
        <div>
            <input type="text" id="player2Input" placeholder="Jugador 2">
            <input type="file" id="player2Image" accept="image/*">
        </div>
        <div>
            <input type="text" id="player3Input" placeholder="Jugador 3">
            <input type="file" id="player3Image" accept="image/*">
        </div>
        <div>
            <input type="text" id="player4Input" placeholder="Jugador 4">
            <input type="file" id="player4Image" accept="image/*">
        </div>
        <button type="button" onclick="addPlayers()">GUARDAR</button>
    </form>
</div>
    </div>

<div class="board">
    <h1>ANOTADOR TRUCO V1.0</h1>

    <div class="botones">
        <!--<label for="maxScoreSelect" style="color: white;">Seleccionar puntuación máxima:</label>-->
        <select id="maxScoreSelect" onchange="setMaxScore()" style="background: transparent;color: #fff;border: 1px solid #fff;padding: 8px;border-radius: 8px;">
            <option style="    background: #000;" value="15">15 puntos</option>
            <option style="    background: #000;" value="30" selected>30 puntos</option>
        </select>

        <button style="background: transparent;color: #fff;border: 1px solid #fff;padding: 8px;border-radius: 8px; cursor: pointer;" onclick="shufflePlayers()">Tirar reyes</button>  

        <button style="background: transparent;color: #fff;border: 1px solid #fff;padding: 8px;border-radius: 8px; cursor: pointer;" onclick="resetGame()">Resetear</button>  
    
    </div>

    <div class="players">
        <div id="comentarioA" class="comentarioA"></div>
        <div id="comentarioB" class="comentarioB"></div>
        <ul id="playerList">
            <li class="player1">
                <img src="">
                <h4></h4>
            </li>
             <li class="player2">
                <div id="alertBox">No estás anotando</div>
                <img src="4">
                <h4></h4>
            </li>
             <li class="player3">
                <img src="">
                <h4></h4>
            </li>
             <li class="player4">
                <img src="">
                <h4></h4>
            </li>
        </ul>

        

    <div class="team" id="teamA">
        <h2>NOSOTROS</h2>
        <div class="score" id="scoreA">
            <div class="divider" id="dividerA"></div>
        </div>
        <div class="buttons">
            <button class="add" onclick="addPoint('A')">+</button>
            <button class="subtract" onclick="subtractPoint('A')">-</button>
        </div>
    </div>

    <div class="team" id="teamB">
        <h2>ELLOS</h2>
        <div class="score" id="scoreB">
            <div class="divider" id="dividerB"></div>
        </div>
        <div class="buttons">
            <button class="add" onclick="addPoint('B')">+</button>
            <button class="subtract" onclick="subtractPoint('B')">-</button>
        </div>
    </div>

    <div id="winnerMessage"></div>
    
</div>


<script>


function addPlayers() {
    const players = [];

    // Obtener datos de los jugadores
    for (let i = 1; i <= 4; i++) {
        const nameInput = document.getElementById(`player${i}Input`); // Aquí estaba el error
        const imageInput = document.getElementById(`player${i}Image`);
        const playerData = {
            name: nameInput.value || 'Sin nombre',
            image: imageInput.files[0] ? URL.createObjectURL(imageInput.files[0]) : null // Generar URL temporal si hay imagen
        };
        players.push(playerData);
    }

    // Asignar nombres e imágenes
    document.querySelectorAll('#playerList li').forEach((li, index) => {
        const nameElement = li.querySelector('h4');
        const imgElement = li.querySelector('img');

        if (nameElement) nameElement.textContent = players[index].name;
        if (imgElement && players[index].image) {
            imgElement.src = players[index].image; // Asignar la imagen cargada
        }
    });



    document.getElementById('inputplayer').style.display = 'none'; 
}


/*function addPlayers() {
    // Crear un arreglo para almacenar los nombres de los jugadores
    const players = [];

    // Obtener los valores de los campos de entrada y almacenarlos en el arreglo
    players.push(document.getElementById('player1Input').value || 'Sin nombre');
    players.push(document.getElementById('player2Input').value || 'Sin nombre');
    players.push(document.getElementById('player3Input').value || 'Sin nombre');
    players.push(document.getElementById('player4Input').value || 'Sin nombre');

    // Iterar sobre los elementos <li> y asignar los nombres del arreglo
    document.querySelectorAll('#playerList li').forEach((li, index) => {
        const nameElement = li.querySelector('h4'); // Encontrar el <h4> dentro del <li>
        if (nameElement) {
            nameElement.textContent = players[index]; // Asignar el nombre correspondiente
        }
    });

    document.getElementById('inputplayer').style.display = 'none'; 
}*/
</script>


 <script>
        let timeout;

        // Mostrar el mensaje de inactividad
        function showAlert() {
            document.getElementById('alertBox').style.display = 'block';
        }

        // Reiniciar el temporizador de inactividad
        function resetTimer() {
            clearTimeout(timeout); // Limpiar el temporizador anterior
            document.getElementById('alertBox').style.display = 'none'; // Ocultar el mensaje si estaba visible
            timeout = setTimeout(showAlert, 10000); // Reiniciar el temporizador (30 segundos)
        }

        // Escuchar eventos de clic en todos los botones
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('click', resetTimer);
        });

        // Iniciar el temporizador al cargar la página
        resetTimer();
    </script>


<script>
    let maxScore = 30;
    let scores = { A: 0, B: 0 };

    

    function setMaxScore() {
        const selector = document.getElementById('maxScoreSelect');
        maxScore = parseInt(selector.value);
        resetGame(); // Reiniciar el juego al cambiar la puntuación máxima
        document.getElementById('comentarioA').style.display = 'none';
        document.getElementById('comentarioB').style.display = 'none';
    }

    function resetGame() {
        scores = { A: 0, B: 0 };
        document.querySelectorAll('.score').forEach(scoreContainer => {
    Array.from(scoreContainer.children).forEach(child => {
        if (child.id !== 'dividerA' && child.id !== 'dividerB') {
            child.remove(); // Elimina los hijos excepto #dividerA y #dividerB
        }
    });
});

        document.getElementById('winnerMessage').innerText = '';
        document.getElementById('winnerMessage').style.display = 'none';
        document.querySelectorAll('.buttons button').forEach(button => button.disabled = false);
        
        document.getElementById('comentarioA').style.display = 'none';
        document.getElementById('comentarioB').style.display = 'none';
    }

    function updateScore(scoreContainer, team) {
        console.log(maxScore)
        const otherTeam = team === 'A' ? 'B' : 'A';
        const divider = document.getElementById(`divider${team}`);
        const score = scores[team];
        const otherScore = scores[otherTeam];


// Mostrar el mensaje de ganador al alcanzar la puntuación máxima
if (score >= maxScore) {


    const winner = team === 'A' ? '¡GANAMOS!' : 'GANARON ELLOS';
     document.getElementById('winnerMessage').style.display = 'block';
    document.getElementById('winnerMessage').innerText = `${winner}`;
    disableButtons();
} 
// Si no hay ganador, verificar los otros casos
if(maxScore == 30){
    // Mostrar el mensaje "duermen afuera" si se cumplen las condiciones
    if (score > 25 && otherScore < 15) {
        document.getElementById('comentario'+team).style.display = 'block';
        document.getElementById('comentario'+team).innerText = `¡Duermen afuera!`;
    }
    // Mostrar el mensaje "Dormimos adentro" si se cumplen las condiciones
    else if (score > 15 && score < 17 && otherScore > 25) {
        document.getElementById('comentario'+team).style.display = 'block';
        document.getElementById('comentario'+team).innerText = `¡Dormimos adentro!`;
        if(team == 'A'){
            if (document.getElementById('comentarioA').style.display === 'block') {
                document.getElementById('comentarioB').style.display = 'none';
            }
        }else{
            if (document.getElementById('comentarioB').style.display === 'block') {
                document.getElementById('comentarioA').style.display = 'none';
            }
        }
    }



}

        // Mostrar la línea divisora al llegar a 15 puntos
        if (score >= 15) {
            divider.style.display = 'block';
        } else {
            divider.style.display = 'none';
        }

    }




    function disableButtons() {
        document.querySelectorAll('.buttons button').forEach(button => button.disabled = true);
    }

    function addPoint(team) {
        if (scores[team] >= maxScore) return;

        scores[team]++;
        const scoreContainer = document.getElementById(`score${team}`);
        const sets = scoreContainer.querySelectorAll('.set');
        let lastSet = sets[sets.length - 1];

        if (!lastSet || lastSet.childElementCount === 5) {
            lastSet = document.createElement('div');
            lastSet.classList.add('set');
            scoreContainer.appendChild(lastSet);
        }

        const stick = document.createElement('div');
        stick.classList.add('stick', `stick${lastSet.childElementCount + 1}`);
        lastSet.appendChild(stick);

        updateScore(scoreContainer, team);
    }

    function subtractPoint(team) {
        if (scores[team] <= 0) return;

        scores[team]--;
        const scoreContainer = document.getElementById(`score${team}`);
        const sets = scoreContainer.querySelectorAll('.set');
        let lastSet = sets[sets.length - 1];

        if (lastSet) {
            lastSet.removeChild(lastSet.lastChild);
            if (lastSet.childElementCount === 0) {
                scoreContainer.removeChild(lastSet);
            }

            updateScore(scoreContainer, team);
        }
    }

    function shufflePlayers() {
        const playerList = document.getElementById('playerList');
        const players = Array.from(playerList.children);
        players.sort(() => Math.random() - 0.5);
        playerList.innerHTML = '';
        players.forEach(player => playerList.appendChild(player));
    }
</script>

</body>
</html>



